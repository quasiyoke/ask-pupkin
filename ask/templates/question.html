{% extends 'base.html' %}

{% load staticfiles %}

{% block head %}
<link href="{% static 'css/question.css' %}" rel="stylesheet" type="text/css" media="screen">
<script src="{% static 'js/jquery.validate.js' %}"></script>
<script src="{% static 'js/question.js' %}"></script>
{% endblock %}

{% block body %}
<div class="question">
  <div class="question-side">
	<img class="userpic userpic_question">
	{% spaceless %}
	<div class="voting">
	  <div class="vote-amount">{{ question.author.rating }}</div>
	  <div class="vote-buttons">
		<button class="vote-button">▲</button>
		<button class="vote-button">▼</button>
	  </div>
	</div>
	{% endspaceless %}
  </div>
  <div class="question-body">
	<h1 class="body-title">{{ object.title }}</h1>
	<p class="question-body-text">{{ question.text }}</p>
  	<p class="question-bottom">
	  Tags:
	  {% for tag in question.tags.all %}
	  <a href="#">{{ tag.text }}</a>
	  {% endfor %}
	</p>
  </div>
</div>

{% for answer in page_obj %}
<div class="answer">
  <div class="answer-side">
	<img class="userpic">
	<div class="answer-side-options">
	  {% spaceless %}
	  <div class="voting">
		<div class="vote-amount">{{ answer.author.rating }}</div>
		<div class="vote-buttons">
		  <button class="vote-button">▲</button>
		  <button class="vote-button">▼</button>
		</div>
	  </div>
	  {% endspaceless %}
	  <br>
	  <input type="checkbox" id="correct_{{ answer.pk }}"> <label for="correct_{{ answer.pk }}">Correct</label>
	</div>
  </div>
  <div class="answer-body">
	{{ answer.text }}
  </div>
</div>
{% endfor %}

{% if page_obj.has_other_pages %}
<div class="paginator">
  {% if page_obj.has_previous %}
  <a class="buttonish-link" href="{{ object.get_absolute_url }}?page={{ page_obj.previous_page_number }}">&lt;</a>
  {% endif %}  
  <span class="page-number">page #{{ page_obj.number }}</span>
  {% if page_obj.has_next %}
  <a class="buttonish-link" href="{{ object.get_absolute_url }}?page={{ page_obj.next_page_number }}">&gt;</a>
  {% endif %}
</div>
{% endif %}

<hr>

{% if user.is_authenticated %}
<form class="answer-form" action="" method="post">
  {% csrf_token %}
  <textarea class="answer-form-text" placeholder="Type your answer here" name="answer"></textarea>
  <div class="answer-submit-wrap">
	<button class="answer-submit">Send</button>
  </div>
</form>
{% else %}
<p>Do you want to answer this question? <a href="{% url 'login' %}">Login</a></p>
{% endif %}
{% endblock %}
